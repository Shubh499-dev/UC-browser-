<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UC Browser</title>

    <!-- CSS STYLES -->
    <style>
        /* FONT IMPORT */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        /* CSS VARIABLES FOR THEMING */
        :root {
            --bg-color: #f4f7fe;
            --font-color: #333;
            --card-bg: #ffffff;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
            --accent-color: #4a69ff;
            --accent-color-dark: #3b54cc;
            --border-color: #e0e0e0;
            --gradient-start: #6a82fb;
            --gradient-end: #fc5c7d;
            --error-color: #e74c3c;
        }

        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --font-color: #e0e0e0;
            --card-bg: #16213e;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            --accent-color: #0f3460;
            --accent-color-dark: #537895;
            --border-color: #2a3a5e;
            --gradient-start: #0f3460;
            --gradient-end: #e94560;
            --error-color: #ff6b6b;
        }

        /* GENERAL STYLES */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-color);
            color: var(--font-color);
            transition: background-color 0.3s ease, color 0.3s ease;
            overflow-x: hidden;
        }

        /* ANIMATED BACKGROUND */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .circle {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--gradient-start), var(--gradient-end));
            animation: move 25s linear infinite;
            opacity: 0.2;
        }
        .circle-1 { width: 400px; height: 400px; top: 10%; left: 10%; }
        .circle-2 { width: 300px; height: 300px; top: 50%; left: 80%; animation-duration: 30s; }
        .circle-3 { width: 500px; height: 500px; top: 70%; left: 20%; animation-duration: 20s; }

        @keyframes move {
            0% { transform: translate(0, 0) rotate(0deg) scale(1); }
            50% { transform: translate(100px, 150px) rotate(180deg) scale(1.2); }
            100% { transform: translate(0, 0) rotate(360deg) scale(1); }
        }


        /* MAIN CONTAINER */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* HEADER SECTION */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .greeting-section .greeting {
            font-size: 2.5rem;
            font-weight: 600;
        }

        .greeting-section .date-time {
            font-size: 1rem;
            opacity: 0.7;
        }

        .theme-switcher {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }
        .theme-toggle {
            width: 50px;
            height: 26px;
            background: var(--border-color);
            border-radius: 13px;
            position: relative;
            cursor: pointer;
        }
        .theme-toggle-slider {
            position: absolute;
            width: 22px;
            height: 22px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
        }
        [data-theme="dark"] .theme-toggle-slider {
            transform: translateX(24px);
        }

        /* SEARCH SECTION */
        .search-container {
            margin: 40px 0;
            text-align: center;
        }

        .search-bar {
            display: flex;
            max-width: 700px;
            margin: 0 auto;
            background-color: var(--card-bg);
            border-radius: 50px;
            padding: 5px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .search-bar input {
            flex-grow: 1;
            border: none;
            outline: none;
            background: transparent;
            padding: 15px 20px;
            font-size: 1.1rem;
            color: var(--font-color);
        }

        .search-bar button {
            background-color: transparent;
            border: none;
            padding: 0 15px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .search-bar button:hover {
            transform: scale(1.1);
        }
        .search-bar button:active {
            transform: scale(0.95);
        }
        .search-bar button svg {
            width: 24px;
            height: 24px;
            fill: var(--font-color);
            opacity: 0.7;
        }

        #voice-search-btn.listening svg {
            fill: var(--accent-color);
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.7; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.7; }
        }

        .search-engines {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        .engine-btn {
            padding: 8px 20px;
            border: 2px solid var(--border-color);
            border-radius: 20px;
            cursor: pointer;
            background: transparent;
            color: var(--font-color);
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .engine-btn:hover {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        .engine-btn.active {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
            box-shadow: 0 4px 15px rgba(74, 105, 255, 0.4);
        }

        /* SPEED DIAL SECTION */
        .speed-dials {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }
        .dial {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            text-decoration: none;
            color: var(--font-color);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .dial:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        .dial:active {
            transform: translateY(-5px) scale(0.98);
        }
        .dial svg {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
        }
        .dial span {
            font-weight: 500;
        }

        /* NEWS SECTION */
        .news-section {
            margin-top: 40px;
        }
        .section-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 20px;
            border-left: 5px solid var(--accent-color);
            padding-left: 15px;
        }
        #news-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        .news-article {
            background-color: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow);
            text-decoration: none;
            color: var(--font-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .news-article:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        .news-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background-color: var(--border-color);
        }
        .news-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        .news-headline {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            flex-grow: 1;
        }
        .news-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            opacity: 0.7;
            margin-top: 15px;
        }
        .news-source {
            font-weight: 600;
        }
        .news-error {
            grid-column: 1 / -1;
            text-align: center;
            padding: 40px;
            background-color: var(--card-bg);
            border-radius: 15px;
            color: var(--error-color);
        }
        .news-error strong { font-size: 1.2rem; }
        .news-error span { font-weight: 400; font-size: 0.9em; opacity: 0.9; }
        .news-error em { font-size: 0.8em; opacity: 0.7; display: block; margin-top: 10px; }

        #news-loader {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            grid-column: 1 / -1;
        }

        /* RESPONSIVE DESIGN */
        @media (max-width: 768px) {
            .greeting-section .greeting { font-size: 2rem; }
            header { flex-direction: column; align-items: flex-start; gap: 15px; }
            .speed-dials { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); }
            .dial svg { width: 36px; height: 36px; }
        }

        @media (max-width: 480px) {
            body { font-size: 14px; }
            .greeting-section .greeting { font-size: 1.5rem; }
            .search-bar { flex-direction: column; border-radius: 20px; padding: 10px; }
            .search-bar input { text-align: center; padding: 10px; }
            .search-bar-buttons { display: flex; justify-content: center; border-top: 1px solid var(--border-color); margin-top: 10px; padding-top: 10px; }
            #news-container { grid-template-columns: 1fr; }
        }
    </style>
</head>

<body>
    <!-- Animated Background -->
    <div class="background-animation">
        <div class="circle circle-1"></div>
        <div class="circle circle-2"></div>
        <div class="circle circle-3"></div>
    </div>

    <div class="container">
        <!-- HEADER: GREETING, DATE/TIME, THEME TOGGLE -->
        <header>
            <div class="greeting-section">
                <h1 id="greeting" class="greeting">Good Morning</h1>
                <p id="date-time" class="date-time">Loading...</p>
            </div>
            <div class="theme-switcher" id="theme-switcher" title="Toggle Dark/Light Mode">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                <div class="theme-toggle">
                    <div class="theme-toggle-slider"></div>
                </div>
            </div>
        </header>
      
        <main>
            <!-- SEARCH SECTION -->
            <section class="search-container">
                <form id="search-form" class="search-bar" onsubmit="handleSearch(event)">
                    <input type="text" id="search-input" placeholder="Search the web..." autocomplete="off">
                    <div class="search-bar-buttons">
                        <button type="button" id="voice-search-btn" title="Voice Search">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/><path d="M17 11h-1c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92z"/></svg>
                        </button>
                        <button type="submit" title="Search">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
                        </button>
                    </div>
                </form>

                <div class="search-engines">
                    <button class="engine-btn active" data-engine="google">Google</button>
                    <button class="engine-btn" data-engine="duckduckgo">DuckDuckGo</button>
                    <button class="engine-btn" data-engine="bing">Bing</button>
                    <button class="engine-btn" data-engine="brave">Brave</button>
                </div>
            </section
          
          
            <!-- SPEED DIALS SECTION -->
            <section class="speed-dials">
                <a href="https://www.youtube.com" target="_blank" class="dial">
                    <svg viewBox="0 0 28 20" fill="#FF0000"><path d="M27.5 3.1s-.3-2.1-1.2-3C25.2.1 24 .1 24 .1h-20s-1.2 0-2.3.9C.6 2 .4 3.1.4 3.1S.1 5.2.1 7.3v5.4c0 2.1.3 4.2.3 4.2s.3 2.1 1.2 3c1.1.9 2.5.9 2.5.9h20c0 0 1.2 0 2.3-.9 1.1-.9 1.2-2.1 1.2-2.1s.3-2.1.3-4.2V7.3c0-2.1-.3-4.2-.3-4.2zM11.1 14.4v-9l8.6 4.5-8.6 4.5z"/></svg>
                    <span>YouTube</span>
                </a>
                <a href="https://www.facebook.com" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#1877F2"><path d="M22.675 0H1.325C.593 0 0 .593 0 1.325v21.35C0 23.407.593 24 1.325 24H12.82v-9.294H9.692v-3.622h3.128V8.413c0-3.1 1.893-4.788 4.658-4.788 1.325 0 2.463.099 2.795.143v3.24l-1.918.001c-1.504 0-1.795.715-1.795 1.763v2.313h3.587l-.467 3.622h-3.12V24h6.116c.732 0 1.325-.593 1.325-1.325V1.325C24 .593 23.407 0 22.675 0z"/></svg>
                    <span>Facebook</span>
                </a>
                <a href="https://www.instagram.com" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="url(#insta-gradient)"><defs><radialGradient id="insta-gradient" cx="0.3" cy="1" r="1"><stop offset="0" stop-color="#FFD600"/><stop offset="0.5" stop-color="#FF0100"/><stop offset="1" stop-color="#D700C9"/></radialGradient></defs><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.012 3.584-.07 4.85c-.148 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.012-3.584.07-4.85c.148-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.116 0-3.472.01-4.695.067-2.45.112-3.791 1.4-3.903 3.903-.057 1.223-.067 1.579-.067 4.695s.01 3.472.067 4.695c.112 2.503 1.453 3.791 3.903 3.903 1.223.057 1.579.067 4.695.067s3.472-.01 4.695-.067c2.45-.112 3.791-1.4 3.903-3.903.057-1.223.067-1.579.067-4.695s-.01-3.472-.067-4.695c-.112-2.503-1.453-3.791-3.903-3.903C15.472 3.975 15.116 3.965 12 3.965zm0 2.972c-2.49 0-4.485 1.995-4.485 4.485s1.995 4.485 4.485 4.485 4.485-1.995 4.485-4.485S14.49 6.937 12 6.937zm0 7.17c-1.488 0-2.685-1.197-2.685-2.685s1.197-2.685 2.685-2.685 2.685 1.197 2.685 2.685-1.197 2.685-2.685 2.685zm4.868-7.25c-.63 0-1.14.51-1.14 1.14s.51 1.14 1.14 1.14 1.14-.51 1.14-1.14-.51-1.14-1.14-1.14z"/></svg>
                    <span>Instagram</span>
                </a>
                <a href="https://twitter.com" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#1DA1F2"><path d="M23.643 4.937c-.835.37-1.732.62-2.675.733a4.67 4.67 0 0 0 2.048-2.578 9.3 9.3 0 0 1-2.958 1.13 4.66 4.66 0 0 0-7.938 4.25 13.229 13.229 0 0 1-9.602-4.868c-.34.58-.535 1.254-.535 1.972 0 1.61.82 3.03 2.066 3.86a4.65 4.65 0 0 1-2.11-.583v.06a4.66 4.66 0 0 0 3.738 4.566 4.65 4.65 0 0 1-2.104.08 4.66 4.66 0 0 0 4.35 3.234 9.35 9.35 0 0 1-5.786 1.995c-.376 0-.748-.022-1.112-.065a13.175 13.175 0 0 0 7.14 2.093c8.57 0 13.255-7.098 13.255-13.254 0-.202-.005-.403-.014-.602a9.42 9.42 0 0 0 2.308-2.387z"/></svg>
                    <span>Twitter</span>
                </a>
                <a href="https://web.whatsapp.com" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#25D366"><path d="M19.742 4.258a9.78 9.78 0 0 0-13.924 0 9.778 9.778 0 0 0 0 13.924L4.258 19.742l1.64-4.563a9.777 9.777 0 0 0 13.924-13.924-3.15-3.15zM12.001 21.365a9.365 9.365 0 1 1 0-18.73 9.365 9.365 0 0 1 0 18.73z"/><path d="M12 22.001a10 10 0 1 1 0-20 10 10 0 0 1 0 20zm0-18a8 8 0 1 0 0 16 8 8 0 0 0 0-16z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.452 14.126c-.225-.112-1.327-.655-1.533-.73-.205-.075-.354-.112-.504.113-.15.225-.58.73-.712.879-.132.15-.264.168-.489.056-.225-.113-.945-.35-1.8-1.11-.666-.593-1.113-1.328-1.245-1.553-.132-.225-.015-.347.1-.459.102-.1.225-.263.338-.394.112-.132.15-.225.225-.375.075-.15.037-.282-.019-.394-.056-.113-.504-1.21-.69-1.656-.182-.43-.368-.37-.504-.377h-.45c-.15 0-.394.056-.6.315-.205.263-.787.77-787 1.879s.806 2.185.918 2.334c.113.15 1.575 2.4 3.812 3.36.54.225.96.357 1.288.452.54.153.945.132 1.306.08.4-.056 1.327-.54 1.514-1.062.187-.522.187-.96.132-1.062-.056-.102-.206-.15-.43-.263z"/></svg>
                    <span>WhatsApp</span>
                </a>
                <a href="https://www.netflix.com" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#E50914"><path d="M11.91 16.205V7.795L7.76 16.205H2V7.795h5.76v8.41L11.91 7.795h4.33v8.41h5.76V7.795h-5.76l-4.15 8.41z"/></svg>
                    <span>Netflix</span>
                </a>
                <a href="https://www.amazon.in" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#FF9900"><path d="M2.378 12.874l5.48-.124c.48.01.88.38.9.87a.91.91 0 01-.9.91H2.438c-1.34 0-2.44-1.1-2.44-2.44v-1.6c0-1.34 1.1-2.44 2.44-2.44h11.23a2.4 2.4 0 012.44 2.4v1.86a2.4 2.4 0 01-2.44 2.44H7.26a2.4 2.4 0 00-2.44 2.44v1.88a2.4 2.4 0 002.44 2.44h14.3c1.34 0 2.44-1.1 2.44-2.44V5.44C24 4.1 22.9 3 21.56 3H2.44C1.1 3 0 4.1 0 5.44v7.434h2.378z"/></svg>
                    <span>Amazon</span>
                </a>
                <a href="https://www.flipkart.com" target="_blank" class="dial">
                     <svg viewBox="0 0 24 24" fill="#2874F0"><path d="M20.84 4.58H3.16C2.52 4.58 2 5.1 2 5.74v12.52c0 .64.52 1.16 1.16 1.16h17.68c.64 0 1.16-.52 1.16-1.16V5.74c0-.64-.52-1.16-1.16-1.16zM12 17.5a5.5 5.5 0 110-11 5.5 5.5 0 010 11z" fill="#F8C146"/><path d="M12 6.5a5.5 5.5 0 00-5.48 5.5h10.96A5.5 5.5 0 0012 6.5z"/></svg>
                    <span>Flipkart</span>
                </a>
                <a href="https://web.telegram.org" target="_blank" class="dial">
                    <svg viewBox="0 0 24 24" fill="#0088cc"><path d="M9.78 18.29l.28-4.24 7.22-6.59c.33-.3.02-.51-.39-.32L7.2 13.01l-4.14-1.28c-.46-.14-.47-.46.09-.59l16.1-5.83c.38-.14.72.12.59.57L15.3 19.89c-.12.4-.41.48-.72.29l-4.8-3.56z"/></svg>
                    <span>Telegram</span>
                </a>
                 <a href="https://www.hotstar.com" target="_blank" class="dial">
                     <svg viewBox="0 0 24 24" fill="#FFFFFF" style="background:#131A28; border-radius:50%;"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>
                    <span>Hotstar</span>
                </a>
            </section
          
            <!-- NEWS SECTION -->
            <section class="news-section">
                <h2 class="section-title">Top Headlines</h2>
              
              <div id="news-container">
                    <div id="news-loader">Loading news...</div>
                </div>
            </section>
        </main>
    </div>

    <script async="async" data-cfasync="false" src="//pl26869683.profitableratecpm.com/5deb3abfc527900ae8bf11a3fbce275a/invoke.js"></script>
<div id="container-5deb3abfc527900ae8bf11a3fbce275a"></div>
  
    <!-- JAVASCRIPT LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- ELEMENTS ---
            const greetingEl = document.getElementById('greeting');
            const dateTimeEl = document.getElementById('date-time');
            const themeSwitcher = document.getElementById('theme-switcher');
            const searchForm = document.getElementById('search-form');
            const searchInput = document.getElementById('search-input');
            const engineButtons = document.querySelectorAll('.engine-btn');
            const voiceSearchBtn = document.getElementById('voice-search-btn');
            const newsContainer = document.getElementById('news-container');
            
            let currentSearchEngine = 'google';
            const GNEWS_API_KEY = 'bc0ce7d41a308ffba1a170a999557bd4';

            // --- GREETING AND DATE/TIME ---
            function updateDateTime() {
                const now = new Date();
                const hour = now.getHours();

                let greetingText;
                if (hour < 12) {
                    greetingText = "Good Morning, 𝑭𝒓𝒊𝒆𝒏𝒅𝒔";
                } else if (hour < 18) {
                    greetingText = "Good Afternoon, 𝑭𝒓𝒊𝒆𝒏𝒅𝒔";
                } else {
                    greetingText = "Good Evening, 𝑭𝒓𝒊𝒆𝒏𝒅𝒔";
                }
                greetingEl.textContent = greetingText;

                const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const dateString = now.toLocaleDateString([], { weekday: 'long', month: 'long', day: 'numeric' });
                dateTimeEl.textContent = `${dateString} | ${timeString}`;
            }

            // --- THEME SWITCHER ---
            function applyTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('browser-theme', theme);
            }

            themeSwitcher.addEventListener('click', () => {
                const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                applyTheme(newTheme);
            });
            
            // --- SEARCH FUNCTIONALITY ---
            window.handleSearch = (e) => {
                e.preventDefault();
                const query = searchInput.value.trim();
                if (query) {
                    let searchUrl;
                    switch (currentSearchEngine) {
                        case 'duckduckgo':
                            searchUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}`;
                            break;
                        case 'bing':
                            searchUrl = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
                            break;
                        case 'brave':
                             searchUrl = `https://search.brave.com/search?q=${encodeURIComponent(query)}`;
                            break;
                        case 'google':
                        default:
                            searchUrl = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
                            break;
                    }
                    window.open(searchUrl, '_blank');
                    searchInput.value = '';
                }
            };
            
            engineButtons.forEach(button => {
                button.addEventListener('click', () => {
                    engineButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    currentSearchEngine = button.dataset.engine;
                });
            });

            // --- VOICE SEARCH (Web Speech API) ---
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SpeechRecognition) {
                const recognition = new SpeechRecognition();
                recognition.continuous = false;
                recognition.lang = 'en-US';
                recognition.interimResults = false;
                
                voiceSearchBtn.addEventListener('click', () => {
                    try {
                        recognition.start();
                        voiceSearchBtn.classList.add('listening');
                    } catch(e) {
                        console.error("Voice recognition already active.");
                    }
                });

                recognition.onresult = (event) => {
                    const speechResult = event.results[0][0].transcript;
                    searchInput.value = speechResult;
                    setTimeout(() => searchForm.dispatchEvent(new Event('submit', { cancelable: true, bubbles: true })), 300);
                };
                
                recognition.onend = () => {
                    voiceSearchBtn.classList.remove('listening');
                };

                recognition.onerror = (event) => {
                    console.error('Speech recognition error:', event.error);
                    voiceSearchBtn.classList.remove('listening');
                };
            } else {
                voiceSearchBtn.style.display = 'none';
            }

            // --- NEWS API FETCH ---
            async function fetchNews() {
                const loader = document.getElementById('news-loader');
                loader.textContent = 'Fetching latest headlines...';
                
                // Construct the GNews URL. Added `country=in` for more relevant news.
                const gnewsUrl = `https://gnews.io/api/v4/top-headlines?token=${GNEWS_API_KEY}&lang=en&max=50&country=in`;
                
                // Use a CORS proxy to prevent browser security errors when running the file locally.
                const proxyUrl = `https://api.allorigins.win/raw?url=${encodeURIComponent(gnewsUrl)}`;

                try {
                    const response = await fetch(proxyUrl);
                    if (!response.ok) {
                        throw new Error(`Network response was not OK. Status: ${response.status}`);
                    }
                    const dataText = await response.text();
                    const data = JSON.parse(dataText);

                    // GNews sends errors inside a JSON object, so we check for that.
                    if (data.errors) {
                        throw new Error(`API Error: ${data.errors[0]}`);
                    }
                    
                    displayNews(data.articles);
                } catch (error) {
                    console.error("Failed to fetch news:", error);
                    newsContainer.innerHTML = `<div class="news-error">
                        <strong>Oops! Could not load news.</strong><br>
                        <span>This can happen if the API is busy or your ad-blocker is interfering.</span>
                        <em>Error: ${error.message}</em>
                    </div>`;
                }
            }


            function displayNews(articles) {
                newsContainer.innerHTML = ''; // Clear loader
                if (!articles || articles.length === 0) {
                     newsContainer.innerHTML = `<p class="news-error">No news articles found at the moment.</p>`;
                     return;
                }
                
                articles.forEach(article => {
                    // Skip articles without a title or image for better quality feed
                    if (!article.title || !article.image) {
                        return;
                    }

                    const articleEl = document.createElement('a');
                    articleEl.className = 'news-article';
                    articleEl.href = article.url;
                    articleEl.target = '_blank';
                    articleEl.rel = 'noopener noreferrer';
                    
                    const timeAgo = formatTimeAgo(new Date(article.publishedAt));

                    articleEl.innerHTML = `
                        <img src="${article.image}" alt="" class="news-image" onerror="this.style.display='none'">
                        <div class="news-content">
                            <h3 class="news-headline">${article.title}</h3>
                            <div class="news-meta">
                                <span class="news-source">${article.source.name}</span>
                                <span class="news-time">${timeAgo}</span>
                            </div>
                        </div>
                    `;
                    newsContainer.appendChild(articleEl);
                });
            }
            
            function formatTimeAgo(date) {
                const seconds = Math.floor((new Date() - date) / 1000);
                let interval = seconds / 31536000;
                if (interval > 1) return Math.floor(interval) + "y ago";
                interval = seconds / 2592000;
                if (interval > 1) return Math.floor(interval) + "mo ago";
                interval = seconds / 86400;
                if (interval > 1) return Math.floor(interval) + "d ago";
                interval = seconds / 3600;
                if (interval > 1) return Math.floor(interval) + "h ago";
                interval = seconds / 60;
                if (interval > 1) return Math.floor(interval) + "m ago";
                return "Just now";
            }

            // --- INITIALIZATION ---
            function init() {
                const savedTheme = localStorage.getItem('browser-theme') || 'light';
                applyTheme(savedTheme);

                updateDateTime();
                setInterval(updateDateTime, 30000); // Update time every 30 seconds is enough

                fetchNews();
            }

            init();
        });
    </script>
</body>
</html>
